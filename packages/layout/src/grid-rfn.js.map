{
  "version": 3,
  "sources": ["/Users/jamieowen/Workspace/packages/packages/layout/src/grid-rfn.ts"],
  "sourcesContent": ["import {\n  range2d,\n  map,\n  mapcat,\n  comp,\n  filter,\n  iterator,\n} from \"@thi.ng/transducers\";\nimport { GridIdGen, SubdivItem } from \"./grid-types\";\n\nexport const subdivRange2dIterator = (\n  fromX: number,\n  toX: number,\n  fromY: number,\n  toY: number,\n  step: number,\n  depth: number,\n  idGen: GridIdGen\n) =>\n  iterator(\n    map<[number, number], SubdivItem>(([x, y]) => [\n      idGen(x, y),\n      x,\n      y,\n      step,\n      depth,\n    ]),\n    range2d(fromX, toX, fromY, toY, step, step)\n  );\n\nexport const mapSubdivide = (idGen: GridIdGen) =>\n  mapcat<SubdivItem, SubdivItem>(([id, x, y, step, depth]) => {\n    const subStep = step * 0.5;\n    return subdivRange2dIterator(\n      x,\n      x + step,\n      y,\n      y + step,\n      subStep,\n      depth + 1,\n      idGen\n    );\n  });\n\nexport const mapSubdivideIf = (\n  idGen: GridIdGen,\n  cond: (v: SubdivItem) => boolean\n) =>\n  mapcat<SubdivItem, SubdivItem>((item) => {\n    if (cond(item)) {\n      const [id, x, y, step, depth] = item;\n      const subStep = step * 0.5;\n      return subdivRange2dIterator(\n        x,\n        x + step,\n        y,\n        y + step,\n        subStep,\n        depth + 1,\n        idGen\n      );\n    } else {\n      return [item];\n    }\n  });\n"],
  "mappings": "AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUO,aAAM,wBAAwB,CACnC,OACA,KACA,OACA,KACA,MACA,OACA,UAEA,SACE,IAAkC,CAAC,CAAC,GAAG,OAAO;AAAA,EAC5C,MAAM,GAAG;AAAA,EACT;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,IAEF,QAAQ,OAAO,KAAK,OAAO,KAAK,MAAM;AAGnC,aAAM,eAAe,CAAC,UAC3B,OAA+B,CAAC,CAAC,IAAI,GAAG,GAAG,MAAM,WAAW;AAC1D,QAAM,UAAU,OAAO;AACvB,SAAO,sBACL,GACA,IAAI,MACJ,GACA,IAAI,MACJ,SACA,QAAQ,GACR;AAAA;AAIC,aAAM,iBAAiB,CAC5B,OACA,SAEA,OAA+B,CAAC,SAAS;AACvC,MAAI,KAAK,OAAO;AACd,UAAM,CAAC,IAAI,GAAG,GAAG,MAAM,SAAS;AAChC,UAAM,UAAU,OAAO;AACvB,WAAO,sBACL,GACA,IAAI,MACJ,GACA,IAAI,MACJ,SACA,QAAQ,GACR;AAAA,SAEG;AACL,WAAO,CAAC;AAAA;AAAA;",
  "names": []
}
